{"title":"git连接多个远程仓库","uid":"26adabf471198c3cb7b6e07a53679231","slug":"git连接多个远程仓库","date":"2021-03-09T12:30:33.000Z","updated":"2021-05-07T15:26:20.942Z","comments":true,"path":"api/articles/git连接多个远程仓库.json","keywords":null,"cover":null,"content":"<!--markdown-->问题描述\n\n<p>有时候我们需要在同一台电脑上连接多个远程仓库，比如连接两个GitHub账号，那么需要两个条件。<br>1.生成两对 私钥/公钥，并且密钥文件命名不能重复。<br>2.push 到remote时区分两个账户，推送到相应的仓库。</p>\n<p>相应配置</p>\n<p>1.在MAC的终端中输入以下命令，查看密钥。</p>\n<p>ls ~/.ssh<br>如果有 id_rsa 和 id_rsa.pub，说明已存在一对密钥/公钥。</p>\n<p>2.创建新的 密钥/公钥，并指定密钥名称，比如id_rsa_x（x为任意名称）</p>\n<p>ssh-keygen -t rsa -f ~/.ssh/id_rsa_x -C “<a href=\"mailto:&#121;&#111;&#117;&#x72;&#109;&#x61;&#x69;&#x6c;&#64;&#120;&#120;&#120;&#46;&#x63;&#111;&#109;\">&#121;&#111;&#117;&#x72;&#109;&#x61;&#x69;&#x6c;&#64;&#120;&#120;&#120;&#46;&#x63;&#111;&#109;</a>“<br>操作完成后，该目录会多出 id_rsa_x 和 id_rsa_x.pub 两个文件。</p>\n<p>3.在 ~/.ssh/ 文件夹下创建一个 config 文件</p>\n<p>$ touch config<br>$ vim config<br>编辑config文件，配置不同的仓库指向不同的密钥文件。</p>\n<p>第一个账号，默认使用的账号<br>Host github.com<br>HostName github.com<br>User git<br>IdentityFile ~/.ssh/id_rsa</p>\n<p>第二个账号<br>Host second.github.com # second为前缀名，可以任意设置<br>HostName github.com<br>User git<br>IdentityFile ~/.ssh/id_rsa_x<br>原理分析<br>1.ssh 客户端是通过类似 <a href=\"mailto:&#103;&#x69;&#x74;&#x40;&#x67;&#x69;&#x74;&#x68;&#x75;&#98;&#x2e;&#99;&#111;&#x6d;\">&#103;&#x69;&#x74;&#x40;&#x67;&#x69;&#x74;&#x68;&#x75;&#98;&#x2e;&#99;&#111;&#x6d;</a>:githubUserName/repName.git 的地址来识别使用本地的哪个私钥的，地址中的 User 是@前面的git， Host 是@后面的github.com。<br>2.如果所有账号的 User 和 Host 都为 git 和 github.com，那么就只能使用一个私钥。所以要对User 和 Host 进行配置，让每个账号使用自己的 Host，每个 Host 的域名做 CNAME 解析到 github.com，如上面配置中的Host second.github.com。<br>3.配置了别名之后，新的地址就是<a href=\"mailto:&#x67;&#105;&#116;&#x40;&#115;&#x65;&#99;&#111;&#110;&#x64;&#x2e;&#103;&#x69;&#116;&#x68;&#117;&#98;&#46;&#99;&#111;&#x6d;\">&#x67;&#105;&#116;&#x40;&#115;&#x65;&#99;&#111;&#110;&#x64;&#x2e;&#103;&#x69;&#116;&#x68;&#117;&#98;&#46;&#99;&#111;&#x6d;</a>:githubUserName/repName.git（在添加远程仓库时使用）。<br>这样 ssh 在连接时就可以区别不同的账号了。<br>4.查看SSH 密钥的值，分别添加到对应的 GitHub 账户中</p>\n<p>$ cat id_rsa.pub<br>$ cat id_rsa_x.pub<br>把这两个值分别 copy 到 GitHub 账号中的 SSH keys 中保存。</p>\n<p>5.清空本地的 SSH 缓存，添加新的 SSH 密钥 到 SSH agent中</p>\n<p>$ ssh-add -D<br>$ ssh-add id_rsa<br>$ ssh-add id_rsa_x<br>最后确认一下新密钥已经添加成功</p>\n<p>$ ssh-add -l<br>6.测试 ssh 链接</p>\n<p>ssh -T <a href=\"mailto:&#103;&#x69;&#x74;&#x40;&#x67;&#105;&#x74;&#104;&#117;&#x62;&#x2e;&#x63;&#x6f;&#x6d;\">&#103;&#x69;&#x74;&#x40;&#x67;&#105;&#x74;&#104;&#117;&#x62;&#x2e;&#x63;&#x6f;&#x6d;</a><br>ssh -T <a href=\"mailto:&#103;&#105;&#x74;&#x40;&#115;&#x65;&#x63;&#111;&#x6e;&#100;&#x2e;&#x67;&#x69;&#116;&#x68;&#x75;&#98;&#46;&#99;&#x6f;&#109;\">&#103;&#105;&#x74;&#x40;&#115;&#x65;&#x63;&#111;&#x6e;&#100;&#x2e;&#x67;&#x69;&#116;&#x68;&#x75;&#98;&#46;&#99;&#x6f;&#109;</a></p>\n<p>xxx! You’ve successfully authenticated, but GitHub does not provide bash access.<br>出现上述提示，连接成功<br>7.取消 git 全局用户名/邮箱的设置，设置独立的 用户名/邮箱</p>\n<p>取消全局 用户名/邮箱 配置<br>$ git config –global –unset user.name<br>$ git config –global –unset user.email</p>\n<p>进入项目文件夹，单独设置每个repo 用户名/邮箱<br>$ git config user.email “<a href=\"mailto:&#120;&#120;&#120;&#120;&#x40;&#x78;&#x78;&#46;&#99;&#111;&#109;\">&#120;&#120;&#120;&#120;&#x40;&#x78;&#x78;&#46;&#99;&#111;&#109;</a>“<br>$ git config user.name “xxxx”<br>查看git项目的配置</p>\n<p>git config –list<br>8.命令行进入项目目录，重建 origin (whatever 为相应项目地址)</p>\n<p>$ git remote rm origin</p>\n<p>远程仓库地址，注意Host名称<br>$ git remote add origin <a href=\"mailto:&#x67;&#105;&#116;&#x40;&#x73;&#x65;&#x63;&#x6f;&#110;&#x64;&#x2e;&#x67;&#x69;&#x74;&#x68;&#x75;&#x62;&#x2e;&#99;&#111;&#x6d;\">&#x67;&#105;&#116;&#x40;&#x73;&#x65;&#x63;&#x6f;&#110;&#x64;&#x2e;&#x67;&#x69;&#x74;&#x68;&#x75;&#x62;&#x2e;&#99;&#111;&#x6d;</a>:githubUserName/repName.git<br>$ git remote -v # 查看远程<br>10.远程 push 测试<br>首先在 GitHub 上新建一个名为 testProj 的远程仓库，然后再在本地建一个本地仓库。</p>\n<p>$ cd ~/documnts<br>$ mkdir testProj<br>1.进入 testProj 文件夹，创建 REDME.md文件<br>2.初始化此文件夹为git<br>3.添加并提交README.md到Git本地仓库<br>4.添加远程仓库<br>5.把README.md推送到远程仓库</p>\n<p>$ cd testProj<br>$ echo “# ludilala.github.io” &gt;&gt; README.md<br>$ git init<br>$ git add README.md<br>$ git commit -m “first commit”</p>\n<p>如果前面已添加远程连接，就无需再次添加<br>$ git remote add origin <a href=\"https://github.com/ludilalaa/\">https://github.com/ludilalaa/</a>…<br>$ git push -u origin master</p>\n<p>作者：牧晓逸风<br>链接：<a href=\"http://www.jianshu.com/p/04e9\">http://www.jianshu.com/p/04e9</a>…<br>來源：简书<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>\n","feature":null,"text":"问题描述 有时候我们需要在同一台电脑上连接多个远程仓库，比如连接两个GitHub账号，那么需要两个条件。1.生成两对 私钥/公钥，并且密钥文件命名不能重复。2.push 到remote时区分两个账户，推送到相应的仓库。 相应配置 1.在MAC的终端中输入以下命令，查看密钥。 ls...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"默认分类","slug":"默认分类","count":18,"path":"api/categories/默认分类.json"}],"tags":[],"toc":"","author":{"name":"KittyCat","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"","description":"一位正在上学的读书人 <br /> @ <b>QQ：64209310</b>","socials":{"github":"https://github.com/Jeffrey-done","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":""}},"mapped":true,"prev_post":{"title":"在线测试哈哈哈","uid":"5917b071d21c403917d0deccf59b49f4","slug":"测试在线后台","date":"2021-04-01T00:00:00.000Z","updated":"2021-05-07T15:26:20.950Z","comments":true,"path":"api/articles/测试在线后台.json","keywords":null,"cover":[],"text":"测试成功！！！！ ","link":"","photos":[],"count_time":{"symbolsCount":9,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"KittyCat","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"","description":"一位正在上学的读书人 <br /> @ <b>QQ：64209310</b>","socials":{"github":"https://github.com/Jeffrey-done","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":""}}},"next_post":{"title":"typecho文章转hexo","uid":"193f9d02d1e490bebf504c20f68b4358","slug":"typecho文章转hexo","date":"2021-03-06T15:31:24.000Z","updated":"2021-05-07T15:26:20.942Z","comments":true,"path":"api/articles/typecho文章转hexo.json","keywords":null,"cover":[],"text":" {card-default width=”100%” label=”相关链接”}原文地址：https://gmero.com/default/187.html下载地址：https://pan.gmero.com/disk/projects/dealtypecho/release...","link":"","photos":[],"count_time":{"symbolsCount":703,"symbolsTime":"1 mins."},"categories":[{"name":"默认分类","slug":"默认分类","count":18,"path":"api/categories/默认分类.json"}],"tags":[],"author":{"name":"KittyCat","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"","description":"一位正在上学的读书人 <br /> @ <b>QQ：64209310</b>","socials":{"github":"https://github.com/Jeffrey-done","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":""}}}}